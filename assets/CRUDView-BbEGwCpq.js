import{j as y,k as I,d as a,e as s,i as V,t as r,F as m,h,w as g,M,o,l as v,v as $,m as D,p as U}from"./index-DgNiiMGI.js";const j={class:"flex justify-between items-center mb-6"},O={class:"text-2xl font-bold text-indigo-600"},A={class:"bg-white rounded-lg shadow overflow-x-auto"},B={class:"min-w-full divide-y divide-gray-200"},E={class:"bg-gray-700"},F={class:"bg-white divide-y divide-gray-200"},S={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},L=["onClick"],R=["onClick"],T={class:"space-y-4"},q={class:"block text-sm font-medium text-gray-700 text-right"},z=["onUpdate:modelValue","type"],G=["onUpdate:modelValue"],H=["value"],K={__name:"CRUDView",props:{resourceName:String,headers:Array,items:Array,fields:Array},emits:["update:items"],setup(d,{emit:b}){const x=d,p=b,c=y(!1),u=y(null),l=I({}),w=()=>{C(),c.value=!0},f=t=>{Object.assign(l,t),u.value=t.id,c.value=!0},k=()=>{const t=[...x.items];if(u.value){const i=t.findIndex(e=>e.id===u.value);t[i]={...l}}else{const i=t.length>0?Math.max(...t.map(e=>e.id))+1:1;t.push({id:i,...l})}p("update:items",t),c.value=!1},_=t=>{if(confirm(`هل أنت متأكد من حذف ${x.resourceName} هذا؟`)){const i=x.items.filter(e=>e.id!==t);p("update:items",i)}},C=()=>{Object.keys(l).forEach(t=>delete l[t]),x.fields.forEach(t=>{l[t.name]=t.default||""}),u.value=null};return(t,i)=>(o(),a("div",null,[s("div",j,[s("h1",O," ادارة ال"+r(d.resourceName),1),s("button",{onClick:w,class:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700"}," إضافة "+r(d.resourceName),1)]),s("div",A,[s("table",B,[s("thead",E,[s("tr",null,[(o(!0),a(m,null,h(d.headers,e=>(o(),a("th",{key:e,class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},r(e),1))),128)),i[1]||(i[1]=s("th",{class:"px-6 py-3 text-right"},"الإجراءات",-1))])]),s("tbody",F,[(o(!0),a(m,null,h(d.items,e=>(o(),a("tr",{key:e.id},[(o(!0),a(m,null,h(e,(n,N)=>(o(),a("td",{key:N,class:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500"},r(n),1))),128)),s("td",S,[s("button",{onClick:n=>f(e),class:"text-indigo-600 hover:text-indigo-900 ml-3"},"تعديل",8,L),s("button",{onClick:n=>_(e.id),class:"text-red-600 hover:text-red-900"},"حذف",8,R)])]))),128))])])]),V(M,{isOpen:c.value,onClose:i[0]||(i[0]=e=>c.value=!1)},{title:g(()=>[U(r(u.value?`تعديل ${d.resourceName}`:`إضافة ${d.resourceName} جديد`),1)]),actions:g(()=>[s("button",{onClick:k,class:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700"}," حفظ ")]),default:g(()=>[s("div",T,[(o(!0),a(m,null,h(d.fields,e=>(o(),a("div",{key:e.name},[s("label",q,r(e.label),1),e.type!=="select"?v((o(),a("input",{key:0,"onUpdate:modelValue":n=>l[e.name]=n,type:e.type||"text",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 text-right"},null,8,z)),[[$,l[e.name]]]):v((o(),a("select",{key:1,"onUpdate:modelValue":n=>l[e.name]=n,class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 text-right"},[(o(!0),a(m,null,h(e.options,n=>(o(),a("option",{key:n,value:n},r(n),9,H))),128))],8,G)),[[D,l[e.name]]])]))),128))])]),_:1},8,["isOpen"])]))}};export{K as default};
